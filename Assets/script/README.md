# 羊了个羊 2D关卡编辑器

这是一个专为"羊了个羊"游戏设计的2D关卡编辑器，基于Unity3D开发。

## 功能特性

### 核心功能
- **2D卡片编辑**: 支持在2D平面上放置、删除、移动卡片
- **多层编辑**: 支持多个层级的卡片编辑，不同层级可以重叠
- **实时预览**: 实时显示编辑效果，支持卡片悬停效果
- **关卡管理**: 支持保存、加载关卡数据
- **网格系统**: 精确的网格对齐系统，确保卡片位置准确

### 高级功能
- **层级遮罩**: 灰色透明遮罩显示非当前编辑层级，提高编辑效率
- **可放置区域可视化**: 绿色半透明区域显示可放置卡片的范围
- **GUI事件管理**: 防止GUI点击穿透到场景，确保操作准确性
- **卡片大小调节**: 支持实时调整卡片大小
- **网格参数调节**: 支持调整网格大小和卡片间距

### 测试功能
- **多层测试**: 验证不同层级卡片重叠功能
- **放置调试**: 调试卡片放置问题
- **卡片大小测试**: 测试卡片大小调整功能
- **层级遮罩测试**: 测试层级遮罩显示效果
- **网格遮罩对齐测试**: 验证网格和遮罩对齐
- **GUI事件测试**: 测试GUI事件管理功能
- **关卡ID同步测试**: 测试关卡数据同步
- **网格边界测试**: 测试网格边界限制
- **可放置区域测试**: 测试可放置区域可视化功能

## 快速开始

### 1. 基础设置
1. 创建空GameObject，命名为 "LevelEditor2D"
2. 添加 `SheepLevelEditor2D` 脚本组件
3. 运行场景，编辑器会自动初始化

### 2. 快速设置脚本
使用 `QuickSetup2D` 脚本可以快速完成所有设置：
1. 创建空GameObject，命名为 "QuickSetup"
2. 添加 `QuickSetup2D` 脚本组件
3. 运行场景，自动完成所有设置

### 3. 可放置区域可视化设置
使用 `QuickSetupPlaceableArea` 脚本设置可放置区域可视化：
1. 创建空GameObject，命名为 "QuickSetup"
2. 添加 `QuickSetupPlaceableArea` 脚本组件
3. 运行场景，自动完成2D编辑器设置

## 使用方法

### 基本操作
- **左键点击**: 在网格位置放置卡片
- **右键点击**: 删除指定位置的卡片
- **鼠标滚轮**: 切换编辑层级
- **拖拽**: 移动已放置的卡片

### GUI控制面板
- **编辑模式**: 切换编辑/预览模式
- **卡片类型**: 选择要放置的卡片类型
- **卡片大小**: 调整卡片大小
- **网格大小**: 调整网格尺寸
- **卡片间距**: 调整卡片间距
- **层级遮罩**: 控制层级遮罩显示
- **可放置区域**: 控制可放置区域可视化

### 关卡管理
- **保存关卡**: 将当前编辑的关卡保存到文件
- **加载关卡**: 从文件加载关卡数据
- **关卡ID**: 设置关卡编号
- **关卡名称**: 设置关卡名称

## 文件结构

### 核心脚本
- `SheepLevelEditor2D.cs` - 主编辑器脚本
- `LevelValidator2D.cs` - 关卡验证脚本
- `PlaceableAreaVisualizer.cs` - 可放置区域可视化脚本
- `GUIEventManager.cs` - GUI事件管理脚本

### 设置脚本
- `EditorSetup2D.cs` - 编辑器设置脚本
- `QuickSetup2D.cs` - 快速设置脚本
- `QuickSetupPlaceableArea.cs` - 可放置区域快速设置脚本

### 测试脚本
- `MultiLayerTest.cs` - 多层测试
- `PlacementDebugger.cs` - 放置调试
- `TestCardSize.cs` - 卡片大小测试
- `LayerMaskTest.cs` - 层级遮罩测试
- `GridMaskAlignmentTest.cs` - 网格遮罩对齐测试
- `GUIEventTest.cs` - GUI事件测试
- `LevelIDSyncTest.cs` - 关卡ID同步测试
- `GridBoundsTest.cs` - 网格边界测试
- `PlaceableAreaTest.cs` - 可放置区域测试
- `SimplePlacementTest.cs` - 简单放置测试
- `TestCompilation.cs` - 编译测试
- `Test2DEditor.cs` - 2D编辑器测试

### 文档
- `2D编辑器使用说明.md` - 详细使用说明
- `QuickStart2D.md` - 快速开始指南
- `层级遮罩使用示例.md` - 层级遮罩使用说明
- `可放置区域可视化说明.md` - 可放置区域可视化说明

## 技术特性

### 2D渲染
- 使用正交相机进行2D渲染
- 支持2D精灵和2D碰撞检测
- 优化的2D网格系统

### 性能优化
- 高效的GUI事件管理
- 智能的层级遮罩更新
- 优化的卡片渲染

### 数据管理
- JSON格式的关卡数据存储
- 完整的关卡验证系统
- 支持关卡导入导出

## 故障排除

### 常见问题
1. **GUI点击穿透**: 确保GUI事件管理器正常工作
2. **卡片放置失败**: 检查网格设置和碰撞检测
3. **层级遮罩不显示**: 确认遮罩设置和材质配置
4. **可放置区域不显示**: 检查可视化组件设置

### 调试工具
- 使用各种测试脚本进行功能验证
- 查看控制台输出的调试信息
- 使用放置调试器分析放置问题

## 更新日志

### v2.0
- 移除3D编辑器，专注2D功能
- 优化2D渲染性能
- 改进GUI事件管理
- 增强可放置区域可视化

### v1.0
- 初始版本发布
- 基础2D编辑功能
- 多层编辑支持
- 关卡管理功能

## 许可证

本项目采用MIT许可证，详见LICENSE文件。

## 贡献

欢迎提交Issue和Pull Request来改进这个编辑器。

## 联系方式

如有问题或建议，请通过GitHub Issues联系。 